import{A as Ee,B as Le,C as Oe,D as Fe,F as j,H as p,I as B,J as Te,L as ke,a as ue,b as pe,c as Ce,d as fe,e as ve,f as _e,g as ge,h as be,i as he,j as we,k as Se,m as Ae,n as R,o as De,p as N,r as xe,t as P,v as V,w as Ie,y as Me,z as ye}from"./chunk-LH7Q6PYE.js";import{$a as X,Aa as a,Ba as S,Ca as y,Da as E,E as O,Fa as T,Ia as w,Ka as h,L as F,Oa as $,Pa as q,Qa as Q,R as D,S as x,Ta as U,Ua as r,Va as K,Wa as A,_a as W,a as C,b as v,ba as l,ca as b,cd as oe,gd as re,hc as ie,hd as se,jd as le,k as m,kd as ce,l as L,la as f,ld as me,md as de,nc as ne,ob as Y,pb as Z,pc as k,qa as _,qc as ae,va as I,w as u,wb as ee,za as o,zb as te}from"./chunk-3K3MF57M.js";var c=[{id:1,name:"Angular",description:"Desarrollo de aplicaciones web con Angular.",isActive:!0,createdAt:new Date("2023-08-15"),updatedAt:new Date("2023-09-10")},{id:2,name:"React",description:"Desarrollo de interfaces de usuario con React.",isActive:!0,createdAt:new Date("2023-02-01"),updatedAt:new Date("2023-05-20")},{id:3,name:"JavaScript",description:"Fundamentos de Javascript.",isActive:!0,createdAt:new Date("2023-01-15"),updatedAt:new Date("2023-07-25")},{id:4,name:"Spring",description:"Desarrollo de aplicaciones con Spring Framework.",isActive:!0,createdAt:new Date("2023-04-10"),updatedAt:new Date("2023-06-08")},{id:5,name:"Laravel",description:"Desarrollo de aplicaciones con Laravel.",isActive:!0,createdAt:new Date("2023-03-21"),updatedAt:new Date("2023-07-03")}],M=class n{constructor(){}getActiveCourses(){return c=c.filter(t=>t.isActive),m(c).pipe(u(p()))}getInactiveCourses(){return c=c.filter(t=>!t.isActive),m(c).pipe(u(p()))}getCourseById(t){let e=c.find(i=>i.id===t);return e?m(e).pipe(u(p())):L(()=>new Error("Curso no encontrado"))}addCourse(t){let e=B(c),i=v(C({},t),{isActive:!0,id:e+1,createdAt:new Date,updatedAt:new Date});return c=[...c,i],m(c).pipe(u(p(.7)))}deleteCourse(t){return c=c.map(e=>e.id===t?v(C({},e),{isActive:!1,updatedAt:new Date}):e).filter(e=>e.isActive),m(c).pipe(u(p(.3)))}updateCourse(t,e){return c=c.map(i=>i.id===t?v(C(C({},i),e),{updatedAt:new Date}):i).filter(i=>i.isActive),m(c).pipe(u(p(.5)))}activateCourse(t){return c=c.map(e=>e.id===t?v(C({},e),{isActive:!0,updatedAt:new Date}):e).filter(e=>!e.isActive),m(c).pipe(u(p(.5)))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};function $e(n,t){n&1&&(o(0,"mat-error"),r(1,"Nombre es requerido"),a())}function qe(n,t){n&1&&(o(0,"mat-error"),r(1,"Descripcion es requerido"),a())}function Qe(n,t){if(n&1&&(o(0,"mat-option",10),r(1),a()),n&2){let e=t.$implicit;_("value",e.id),l(),A(" ",e.name," ")}}function ze(n,t){n&1&&(o(0,"mat-error"),r(1,"Curso es requerido"),a())}var H=class n{constructor(t,e,i,s){this.fb=t;this.dialogRef=e;this.courseService=i;this.data=s;this.classForm=this.fb.group({title:[s?.title,null],description:[s?.description,null],course:[s?.courseId,null]})}classForm;courses=[];save(){this.classForm.invalid?this.classForm.markAllAsTouched():this.dialogRef.close(this.classForm.value)}close(){this.dialogRef.close()}ngOnInit(){this.loadCourses()}loadCourses(){this.courseService.getActiveCourses().subscribe({next:t=>{this.courses=t.sort((e,i)=>e.name.localeCompare(i.name))},error:t=>{console.error(t)}})}static \u0275fac=function(e){return new(e||n)(b(de),b(Me),b(M),b(ye))};static \u0275cmp=F({type:n,selectors:[["app-class-form"]],decls:25,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"main"],[3,"formGroup"],["matInput","","formControlName","title"],["rows","5","matInput","","formControlName","description"],["formControlName","course"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"actions"],["mat-button","",1,"cancel",3,"click"],["mat-button","",1,"save",3,"click","disabled"],[3,"value"]],template:function(e,i){if(e&1&&(o(0,"h1",0),r(1),a(),o(2,"div",1)(3,"form",2)(4,"mat-form-field")(5,"mat-label"),r(6,"Nombre"),a(),S(7,"input",3),f(8,$e,2,0,"mat-error"),a(),o(9,"mat-form-field")(10,"mat-label"),r(11,"Descripcion"),a(),S(12,"textarea",4),f(13,qe,2,0,"mat-error"),a(),o(14,"mat-form-field")(15,"mat-label"),r(16,"Curso"),a(),o(17,"mat-select",5),f(18,Qe,2,2,"mat-option",6),a(),f(19,ze,2,0,"mat-error"),a()()(),o(20,"div",7)(21,"button",8),w("click",function(){return i.close()}),r(22,"Cancelar"),a(),o(23,"button",9),w("click",function(){return i.save()}),r(24,"Guardar"),a()()),e&2){let s,g,J;l(),K(i.data?i.data.title:"Nuevo Curso"),l(2),_("formGroup",i.classForm),l(5),I((s=i.classForm.get("title"))!=null&&s.invalid?8:-1),l(5),I((g=i.classForm.get("description"))!=null&&g.invalid?13:-1),l(5),_("ngForOf",i.courses),l(),I((J=i.classForm.get("course"))!=null&&J.invalid?19:-1),l(4),_("disabled",!i.classForm.valid)}},dependencies:[Y,k,N,R,De,Le,Fe,Oe,j,le,oe,re,se,ce,me,xe,ie],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}input[_ngcontent-%COMP%]{display:block}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:2rem}.cancel[_ngcontent-%COMP%]{color:#c91212;background-color:#c9121220}.save[_ngcontent-%COMP%]{color:#007a5a;background-color:#007a5a20}div[_ngcontent-%COMP%]{background-color:#181e1e}h1[_ngcontent-%COMP%]{background-color:#004f4e;color:#00bcd4}"]})};var d=[{id:1,title:"Clase 1: Introducci\xF3n a Angular",description:"Angular CLI, instalaci\xF3n y configuraci\xF3n de la aplicaci\xF3n.",courseId:1,isActive:!0,createdAt:new Date("2023-08-15"),updatedAt:new Date("2023-09-10")},{id:2,title:"Clase 2: Directivas",description:"Aprende a usar las directivas de Angular.",courseId:1,isActive:!0,createdAt:new Date("2023-02-01"),updatedAt:new Date("2023-05-20")},{id:3,title:"Clase 3: Componentes",description:"Creaci\xF3n y uso de componentes en Angular.",courseId:1,isActive:!0,createdAt:new Date("2023-01-22"),updatedAt:new Date("2023-01-25")},{id:4,title:"Clase 4: Servicios",description:"Inyecci\xF3n de dependencias y servicios.",courseId:1,isActive:!0,createdAt:new Date("2023-01-28"),updatedAt:new Date("2023-01-30")},{id:5,title:"Clase 5: Enrutamiento",description:"Implementaci\xF3n de rutas y navegaci\xF3n.",courseId:1,isActive:!0,createdAt:new Date("2023-02-02"),updatedAt:new Date("2023-02-05")},{id:6,title:"Clase 1: Introducci\xF3n a React",description:"Creaci\xF3n de componentes y aplicaci\xF3n de React.",courseId:2,isActive:!0,createdAt:new Date("2023-02-02"),updatedAt:new Date("2023-02-05")},{id:7,title:"Clase 2: Componentes de React",description:"Creaci\xF3n de componentes de React.",courseId:2,isActive:!0,createdAt:new Date("2023-02-02"),updatedAt:new Date("2023-02-05")}],G=class n{constructor(){}getActiveClasses(t){return t?m(d.filter(e=>e.courseId===t&&e.isActive)):m(d.filter(e=>e.isActive))}getInactiveClasses(t){return t?m(d.filter(e=>e.courseId===t&&!e.isActive)):m(d.filter(e=>!e.isActive))}getClassById(t){let e=d.find(i=>i.id===t);return e?m(e).pipe(u(p())):L(()=>new Error("Clase no encontrada"))}addClass(t){let e=B(d),i=v(C({},t),{isActive:!0,id:e+1,createdAt:new Date,updatedAt:new Date});return d=[...d,i],m(d).pipe(u(p(.7)))}deleteClass(t){return d=d.map(e=>e.id===t?v(C({},e),{isActive:!1,updatedAt:new Date}):e).filter(e=>e.isActive),m(d).pipe(u(p(.3)))}updateClass(t,e){return d=d.map(i=>i.id===t?v(C(C({},i),e),{updatedAt:new Date}):i).filter(i=>i.isActive),m(d).pipe(u(p(.5)))}activateClass(t){return d=d.map(e=>e.id===t?v(C({},e),{isActive:!0,updatedAt:new Date}):e).filter(e=>!e.isActive),m(d).pipe(u(p(.5)))}getClassesByCourseId(t){let e=d.filter(i=>i.courseId===t);return m(e).pipe(u(p()))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ue=()=>[10,25,100],Ke=n=>[n];function We(n,t){n&1&&S(0,"mat-spinner",1)}function Xe(n,t){n&1&&(o(0,"th",19),r(1," T\xEDtulo "),a())}function Ye(n,t){if(n&1&&(o(0,"td",20),r(1),a()),n&2){let e=t.$implicit;l(),A(" ",e.title," ")}}function Ze(n,t){n&1&&(o(0,"th",19),r(1," Descripci\xF3n "),a())}function et(n,t){if(n&1&&(o(0,"td",20),r(1),a()),n&2){let e=t.$implicit;l(),A(" ",e.description," ")}}function tt(n,t){n&1&&(o(0,"th",19),r(1," Curso "),a())}function it(n,t){if(n&1&&(o(0,"td",20),r(1),a()),n&2){let e=t.$implicit;l(),A(" ",e.courseName," ")}}function nt(n,t){n&1&&(o(0,"th",21),r(1," Acciones "),a())}function at(n,t){if(n&1){let e=T();o(0,"button",26),w("click",function(){D(e);let s=h().$implicit,g=h(2);return x(g.deleteClass(s))}),o(1,"mat-icon"),r(2,"delete"),a()()}}function ot(n,t){if(n&1){let e=T();o(0,"td",20)(1,"div",22)(2,"button",23)(3,"mat-icon"),r(4,"visibility"),a()(),o(5,"button",24),w("click",function(){let s=D(e).$implicit,g=h(2);return x(g.openDialog(s))}),o(6,"mat-icon"),r(7,"edit"),a()(),f(8,at,3,0,"button",25),a()()}if(n&2){let e=t.$implicit,i=h(2);l(2),_("routerLink",X(2,Ke,e.id)),l(6),_("ngIf",!i.showInactive)}}function rt(n,t){n&1&&S(0,"tr",27)}function st(n,t){n&1&&S(0,"tr",28)}function lt(n,t){if(n&1&&(o(0,"tr",29)(1,"td",30),r(2),a()()),n&2){h();let e=U(10);l(2),A(' No hay datos que coincidan con el filtro "',e.value,'" ')}}function ct(n,t){if(n&1){let e=T();o(0,"div",2)(1,"button",3),w("click",function(){D(e);let s=h();return x(s.openDialog(null))}),r(2," Agregar Clase "),a(),o(3,"mat-slide-toggle",4),w("change",function(s){D(e);let g=h();return x(g.toggleInactive(s))}),o(4,"span"),r(5,"Ver clases inactivas"),a()()(),o(6,"mat-form-field")(7,"mat-label"),r(8,"Buscar"),a(),o(9,"input",5,0),w("keyup",function(s){D(e);let g=h();return x(g.applyFilter(s))}),a()(),o(11,"div",6)(12,"table",7),y(13,8),f(14,Xe,2,0,"th",9)(15,Ye,2,1,"td",10),E(),y(16,11),f(17,Ze,2,0,"th",9)(18,et,2,1,"td",10),E(),y(19,12),f(20,tt,2,0,"th",9)(21,it,2,1,"td",10),E(),y(22,13),f(23,nt,2,0,"th",14)(24,ot,9,4,"td",10),E(),f(25,rt,1,0,"tr",15)(26,st,1,0,"tr",16)(27,lt,3,1,"tr",17),a(),S(28,"mat-paginator",18),a()}if(n&2){let e=h();l(12),_("dataSource",e.dataSource),l(13),_("matHeaderRowDef",e.displayedColumns),l(),_("matRowDefColumns",e.displayedColumns),l(2),_("pageSizeOptions",W(4,Ue))}}var Ne=class n{constructor(t,e,i,s){this.route=t;this.classesService=e;this.courseService=i;this.dialog=s}displayedColumns=["title","description","courseName","actions"];dataSource=new Ae;isLoading=!1;showInactive=!1;courses=[];paginator;sort;courseID;ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnInit(){this.route.params.subscribe(t=>{this.courseID=+t.id,this.loadCourses(this.courseID)})}loadCourses(t){this.courseService.getActiveCourses().subscribe({next:e=>{this.courses=e,this.loadClasses()},error:e=>{console.error(e)}})}loadClasses(){this.isLoading=!0,this.showInactive?this.classesService.getInactiveClasses(this.courseID).subscribe({next:t=>{this.mapCoursesNames(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.isLoading=!1},error:t=>{console.error(t),this.isLoading=!1}}):this.classesService.getActiveClasses(this.courseID).subscribe({next:t=>{this.mapCoursesNames(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.isLoading=!1},error:t=>{console.error(t),this.isLoading=!1}})}applyFilter(t){let e=t.target.value;this.dataSource.filter=e.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}openDialog(t){this.dialog.open(H,{data:t||null,width:"500px",disableClose:!1}).afterClosed().subscribe({next:i=>{i&&(t?this.updateClass(t.id,i):this.addClass(i))}})}updateClass(t,e){this.isLoading=!0,this.classesService.updateClass(t,e).subscribe({next:i=>{this.mapCoursesNames(i)},complete:()=>{this.isLoading=!1}})}addClass(t){this.isLoading=!0,this.classesService.addClass(t).subscribe({next:e=>{this.mapCoursesNames(e)},complete:()=>{this.isLoading=!1}})}deleteClass(t){this.isLoading=!0,this.classesService.deleteClass(t.id).subscribe({next:e=>{this.mapCoursesNames(e)},complete:()=>{this.isLoading=!1}})}toggleInactive(t){this.showInactive=t.checked,this.loadClasses()}mapCoursesNames(t){let e=new Map;this.courses.forEach(i=>{e.set(i.id,i.name)}),this.dataSource.data=t.map(i=>v(C({},i),{courseName:e.get(i.courseId)||"Sin Curso"}))}static \u0275fac=function(e){return new(e||n)(b(ee),b(G),b(M),b(Ee))};static \u0275cmp=F({type:n,selectors:[["app-class-list"]],viewQuery:function(e,i){if(e&1&&($(P,5),$(V,5)),e&2){let s;q(s=Q())&&(i.paginator=s.first),q(s=Q())&&(i.sort=s.first)}},decls:5,vars:1,consts:[["input",""],[1,"spinner"],[1,"controls"],["mat-raised-button","",1,"demo-button",3,"click"],["disabled","true","labelPosition","before",3,"change"],["matInput","","placeholder","",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","courseName"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of classes",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"actions"],["mat-icon-button","","aria-label","View button",1,"view-icon",3,"routerLink"],["mat-icon-button","","aria-label","Edit button",1,"edit-icon",3,"click"],["mat-icon-button","","class","delete-icon","aria-label","Delete button",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Delete button",1,"delete-icon",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","3",1,"mat-cell"]],template:function(e,i){e&1&&(o(0,"section")(1,"h1"),r(2,"Lista de Clases"),a(),f(3,We,1,0,"mat-spinner",1)(4,ct,29,5),a()),e&2&&(l(3),I(i.isLoading?3:4))},dependencies:[Z,te,Te,k,ae,ke,N,R,ue,Ce,ge,fe,pe,be,ve,_e,he,we,Se,ne,P,V,Ie,j],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.delete-icon[_ngcontent-%COMP%]{color:#c12}.edit-icon[_ngcontent-%COMP%]{color:#fc0}.view-icon[_ngcontent-%COMP%]{color:#09f}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}@media screen and (max-width: 500px){.controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}section[_ngcontent-%COMP%]{margin:1rem;padding:1rem}.mat-mdc-form-field[_ngcontent-%COMP%]{overflow:hidden}"]})};export{M as a,G as b,Ne as c};
