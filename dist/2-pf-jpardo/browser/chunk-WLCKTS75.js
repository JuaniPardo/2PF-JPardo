import{a as lt,b as mt,c as dt}from"./chunk-XV3CEU5H.js";import{f as Me,g as he,h as be,i as xe,j as Se,l as we,m as ut}from"./chunk-EPCAOVPH.js";import{A as Je,B as Ue,C as Ke,D as H,E as We,F as b,G as Xe,H as G,I as Ye,J as Ze,K as et,L as tt,M as it,N as ot,O as nt,P as rt,Q as at,R as st,S as ct,a as De,b as Ie,c as ye,d as Le,e as Ae,f as Oe,g as Ee,h as Fe,i as Pe,j as Te,k as ke,l as Re,m as Ve,n as V,o as je,p as j,q as Ne,r as N,s as Be,t as B,u as He,v as Ge,w as Qe,x as qe,y as ze,z as $e}from"./chunk-7AMW6AY6.js";import{$a as ie,Aa as o,Ab as W,Ba as g,Ca as T,Da as k,E as Y,F,Fa as O,Ia as p,Ka as f,L as w,M as P,Oa as J,Pa as U,Qa as K,R as M,S as h,Ta as Z,Ua as a,Va as D,Wa as I,Xa as ee,_a as te,a as S,b as A,ba as s,ca as m,ed as de,id as ue,jd as pe,k as _,l as X,la as d,ld as fe,md as Ce,nb as oe,nd as ge,od as _e,pc as R,pd as ve,qa as u,qc as ce,rb as ne,rc as y,sc as le,tc as me,va as x,vb as re,w as v,xb as ae,yb as se,za as r}from"./chunk-NUJUWS5O.js";function ht(i,t){i&1&&(r(0,"mat-error"),a(1,"Nombre es requerido"),o())}function bt(i,t){i&1&&(r(0,"mat-error"),a(1,"Descripcion es requerido"),o())}var Q=class i{constructor(t,e,n){this.fb=t;this.dialogRef=e;this.data=n;this.courseForm=this.fb.group({name:[n?.name,null],description:[n?.description,null]})}courseForm;save(){this.courseForm.invalid?this.courseForm.markAllAsTouched():this.dialogRef.close(this.courseForm.value)}close(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||i)(m(_e),m(Qe),m(qe))};static \u0275cmp=w({type:i,selectors:[["app-course-form"]],decls:19,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"main"],[3,"formGroup"],["matInput","","formControlName","name"],["matInput","","formControlName","description"],["mat-dialog-actions","",1,"actions"],["mat-button","",1,"cancel",3,"click"],["mat-button","",1,"save",3,"click","disabled"]],template:function(e,n){if(e&1&&(r(0,"h1",0),a(1),o(),r(2,"div",1)(3,"form",2)(4,"mat-form-field")(5,"mat-label"),a(6,"Nombre"),o(),g(7,"input",3),d(8,ht,2,0,"mat-error"),o(),r(9,"mat-form-field")(10,"mat-label"),a(11,"Descripcion"),o(),g(12,"input",4),d(13,bt,2,0,"mat-error"),o()()(),r(14,"div",5)(15,"button",6),p("click",function(){return n.close()}),a(16,"Cancelar"),o(),r(17,"button",7),p("click",function(){return n.save()}),a(18,"Guardar"),o()()),e&2){let c,C;s(),D(n.data?n.data.name:"Nuevo Curso"),s(2),u("formGroup",n.courseForm),s(5),x((c=n.courseForm.get("name"))!=null&&c.invalid?8:-1),s(5),x((C=n.courseForm.get("description"))!=null&&C.invalid?13:-1),s(4),u("disabled",!n.courseForm.valid)}},dependencies:[fe,de,ue,pe,Ce,ge,H,j,V,je,y,$e,Ue,Je],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}input[_ngcontent-%COMP%]{display:block}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:2rem}.cancel[_ngcontent-%COMP%]{color:#c91212;background-color:#c9121220}.save[_ngcontent-%COMP%]{color:#007a5a;background-color:#007a5a20}div[_ngcontent-%COMP%]{background-color:#181e1e}h1[_ngcontent-%COMP%]{background-color:#004f4e;color:#00bcd4}"]})};var l=[{id:1,name:"Angular",description:"Desarrollo de aplicaciones web con Angular.",isActive:!0,createdAt:new Date("2023-08-15"),updatedAt:new Date("2023-09-10")},{id:2,name:"React",description:"Desarrollo de interfaces de usuario con React.",isActive:!0,createdAt:new Date("2023-02-01"),updatedAt:new Date("2023-05-20")},{id:3,name:"JavaScript",description:"Fundamentos de Javascript.",isActive:!0,createdAt:new Date("2023-01-15"),updatedAt:new Date("2023-07-25")},{id:4,name:"Spring",description:"Desarrollo de aplicaciones con Spring Framework.",isActive:!0,createdAt:new Date("2023-04-10"),updatedAt:new Date("2023-06-08")},{id:5,name:"Laravel",description:"Desarrollo de aplicaciones con Laravel.",isActive:!0,createdAt:new Date("2023-03-21"),updatedAt:new Date("2023-07-03")}],L=class i{constructor(){}getActiveCourses(){return l=l.filter(t=>t.isActive),_(l).pipe(v(b()))}getInactiveCourses(){return l=l.filter(t=>!t.isActive),_(l).pipe(v(b()))}getCourseById(t){let e=l.find(n=>n.id===t);return e?_(e).pipe(v(b())):X(()=>new Error("Curso no encontrado"))}addCourse(t){let e=Xe(l),n=A(S({},t),{isActive:!0,id:e+1,createdAt:new Date,updatedAt:new Date});return l=[...l,n],_(l).pipe(v(b(.7)))}deleteCourse(t){return l=l.map(e=>e.id===t?A(S({},e),{isActive:!1,updatedAt:new Date}):e).filter(e=>e.isActive),_(l).pipe(v(b(.3)))}updateCourse(t,e){return l=l.map(n=>n.id===t?A(S(S({},n),e),{updatedAt:new Date}):n).filter(n=>n.isActive),_(l).pipe(v(b(.5)))}activateCourse(t){return l=l.map(e=>e.id===t?A(S({},e),{isActive:!0,updatedAt:new Date}):e).filter(e=>!e.isActive),_(l).pipe(v(b(.5)))}static \u0275fac=function(e){return new(e||i)};static \u0275prov=Y({token:i,factory:i.\u0275fac,providedIn:"root"})};var Dt=()=>[10,25,100],It=i=>[i];function yt(i,t){i&1&&g(0,"mat-spinner",1)}function Lt(i,t){i&1&&(r(0,"th",18),a(1," Nombre"),o())}function At(i,t){if(i&1&&(r(0,"td",19),a(1),o()),i&2){let e=t.$implicit;s(),I(" ",e.name,"")}}function Ot(i,t){i&1&&(r(0,"th",18),a(1," Descripcion"),o())}function Et(i,t){if(i&1&&(r(0,"td",19),a(1),o()),i&2){let e=t.$implicit;s(),I(" ",e.description,"")}}function Ft(i,t){i&1&&(r(0,"th",20),a(1," Acciones"),o())}function Pt(i,t){if(i&1){let e=O();r(0,"td",19)(1,"div",21)(2,"button",22)(3,"mat-icon"),a(4,"visibility"),o()(),r(5,"button",23),p("click",function(){let c=M(e).$implicit,C=f(2);return h(C.openDialog(c))}),r(6,"mat-icon"),a(7,"edit"),o()(),r(8,"button",24),p("click",function(){let c=M(e).$implicit,C=f(2);return h(C.deleteCourse(c))}),r(9,"mat-icon"),a(10,"delete"),o()()()()}if(i&2){let e=t.$implicit;s(2),u("routerLink",ie(1,It,e.id))}}function Tt(i,t){i&1&&g(0,"tr",25)}function kt(i,t){i&1&&g(0,"tr",26)}function Rt(i,t){if(i&1&&(r(0,"tr",27)(1,"td",28),a(2),o()()),i&2){f();let e=Z(10);s(2),I('No hay datos que coincidan con el filtro "',e.value,'"')}}function Vt(i,t){if(i&1){let e=O();r(0,"div",2)(1,"button",3),p("click",function(){M(e);let c=f();return h(c.openDialog(null))}),a(2," Agregar Curso "),o(),r(3,"mat-slide-toggle",4),p("change",function(c){M(e);let C=f();return h(C.toggleInactive(c))}),r(4,"span"),a(5,"Ver cursos inactivos "),o()()(),r(6,"mat-form-field")(7,"mat-label"),a(8,"Buscar"),o(),r(9,"input",5,0),p("keyup",function(c){M(e);let C=f();return h(C.applyFilter(c))}),o()(),r(11,"div",6)(12,"table",7),T(13,8),d(14,Lt,2,0,"th",9)(15,At,2,1,"td",10),k(),T(16,11),d(17,Ot,2,0,"th",9)(18,Et,2,1,"td",10),k(),T(19,12),d(20,Ft,2,0,"th",13)(21,Pt,11,3,"td",10),k(),d(22,Tt,1,0,"tr",14)(23,kt,1,0,"tr",15)(24,Rt,3,1,"tr",16),o(),g(25,"mat-paginator",17),o()}if(i&2){let e=f();s(12),u("dataSource",e.dataSource),s(10),u("matHeaderRowDef",e.displayedColumns),s(),u("matRowDefColumns",e.displayedColumns),s(2),u("pageSizeOptions",te(4,Dt))}}var q=class i{constructor(t,e){this.coursesService=t;this.dialog=e}displayedColumns=["nombre","descripcion","acciones"];dataSource=new Ve;isLoading=!1;showInactive=!1;paginator;sort;ngOnInit(){this.loadCourses()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}loadCourses(){this.isLoading=!0,this.showInactive?this.coursesService.getInactiveCourses().subscribe(t=>{this.dataSource.data=t,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.isLoading=!1}):this.coursesService.getActiveCourses().subscribe(t=>{this.dataSource.data=t,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.isLoading=!1})}applyFilter(t){let e=t.target.value;this.dataSource.filter=e.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}openDialog(t){this.dialog.open(Q,{data:t||null,width:"500px",disableClose:!1}).afterClosed().subscribe({next:n=>{n&&(t?this.updateCourse(t.id,n):this.addCourse(n))}})}updateCourse(t,e){this.isLoading=!0,this.coursesService.updateCourse(t,e).subscribe({next:n=>{this.dataSource.data=n},complete:()=>{this.isLoading=!1}})}addCourse(t){this.isLoading=!0,this.coursesService.addCourse(t).subscribe({next:e=>{this.dataSource.data=e},complete:()=>{this.isLoading=!1}})}deleteCourse(t){this.isLoading=!0,this.coursesService.deleteCourse(t.id).subscribe({next:e=>{this.dataSource.data=e},complete:()=>{this.isLoading=!1}})}toggleInactive(t){this.showInactive=t.checked,this.loadCourses()}static \u0275fac=function(e){return new(e||i)(m(L),m(ze))};static \u0275cmp=w({type:i,selectors:[["app-course-list"]],viewQuery:function(e,n){if(e&1&&(J(N,5),J(B,5)),e&2){let c;U(c=K())&&(n.paginator=c.first),U(c=K())&&(n.sort=c.first)}},decls:5,vars:1,consts:[["input",""],[1,"spinner"],[1,"controls"],["mat-raised-button","",1,"demo-button",3,"click"],["disabled","true","labelPosition","before",3,"change"],["matInput","","placeholder","",3,"keyup"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","descripcion"],["matColumnDef","acciones"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of courses",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"actions"],["mat-icon-button","","aria-label","View button",1,"view-icon",3,"routerLink"],["mat-icon-button","","aria-label","Edit button",1,"edit-icon",3,"click"],["mat-icon-button","","aria-label","Delete button",1,"delete-icon",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,n){e&1&&(r(0,"section")(1,"h1"),a(2,"Lista de Cursos"),o(),d(3,yt,1,0,"mat-spinner",1)(4,Vt,26,5),o()),e&2&&(s(3),x(n.isLoading?3:4))},dependencies:[se,H,j,V,G,y,le,Ze,De,ye,Ee,Le,Ie,Fe,Ae,Oe,Pe,Te,ke,R,N,B,He],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.delete-icon[_ngcontent-%COMP%]{color:#c12}.edit-icon[_ngcontent-%COMP%]{color:#fc0}.view-icon[_ngcontent-%COMP%]{color:#09f}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}@media screen and (max-width: 500px){.controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}section[_ngcontent-%COMP%]{margin:1rem;padding:1rem}.mat-mdc-form-field[_ngcontent-%COMP%]{overflow:hidden}"]})};function jt(i,t){i&1&&(r(0,"div",1),g(1,"mat-spinner",3),o())}function Nt(i,t){if(i&1){let e=O();r(0,"mat-card",2)(1,"mat-card-header")(2,"div",4),a(3),o(),r(4,"div")(5,"mat-card-title"),a(6),o(),r(7,"mat-card-subtitle")(8,"mat-chip-listbox")(9,"mat-chip",5),a(10),o()()()()(),r(11,"mat-card-content")(12,"mat-list")(13,"mat-list-item")(14,"mat-icon",6),a(15,"person"),o(),r(16,"span",7),a(17,"Nombre"),o(),r(18,"span",8),a(19),o()(),r(20,"mat-list-item")(21,"mat-icon",6),a(22,"event"),o(),r(23,"span",7),a(24,"Descripcion"),o(),r(25,"span",8),a(26),o()()()(),r(27,"mat-card-actions",9)(28,"button",10),p("click",function(){M(e);let c=f();return h(c.goBack())}),r(29,"mat-icon"),a(30,"arrow_back"),o(),a(31," Volver al listado "),o()()()}if(i&2){let e=f();s(3),ee(" ",e.course.name.charAt(0),"",e.course.name.charAt(1)," "),s(3),D(e.course.name),s(3),u("ngClass",e.course.isActive?"green-chip":"red-chip"),s(),I(" ",e.course.isActive?"Activo":"Inactivo"," "),s(9),D(e.course.name),s(7),D(e.course.description)}}var z=class i{constructor(t,e,n){this.route=t;this.coursesService=e;this.router=n}courseID;course;isLoading=!1;ngOnInit(){this.route.params.subscribe(t=>{this.courseID=+t.id,this.loadCourse()})}loadCourse(){this.isLoading=!0,this.coursesService.getCourseById(this.courseID).subscribe({next:t=>{this.course=t,this.isLoading=!1},error:t=>{console.error(t),this.isLoading=!1}})}goBack(){this.router.navigate(["/courses"]).then()}static \u0275fac=function(e){return new(e||i)(m(re),m(L),m(ae))};static \u0275cmp=w({type:i,selectors:[["app-course-detail"]],decls:3,vars:1,consts:[[1,"course-info-container"],[1,"loading-spinner"],[1,"course-card"],["diameter","50"],["mat-card-avatar","",1,"course-avatar"],[3,"ngClass"],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine",""],["align","end"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,n){e&1&&(r(0,"section",0),d(1,jt,2,0,"div",1)(2,Nt,32,7,"mat-card",2),o()),e&2&&(s(),x(n.isLoading?1:2))},dependencies:[oe,G,lt,mt,xe,Se,be,he,Me,y,R,tt,rt,st,ot,at,nt,it],styles:[".student-info-container[_ngcontent-%COMP%], .course-info-container[_ngcontent-%COMP%], .class-info-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px}.student-card[_ngcontent-%COMP%], .not-found-card[_ngcontent-%COMP%], .course-card[_ngcontent-%COMP%], .class-card[_ngcontent-%COMP%]{max-width:600px;width:100%}.student-avatar[_ngcontent-%COMP%], .course-avatar[_ngcontent-%COMP%], .class-avatar[_ngcontent-%COMP%]{width:100px;height:100px;background-color:#09f;color:#fff;display:flex;align-items:center;justify-content:center;font-size:36px;font-weight:lighter;margin:16px}mat-card-content[_ngcontent-%COMP%]{margin-top:20px}mat-list-item[_ngcontent-%COMP%]{height:auto!important;margin-bottom:16px}mat-card-actions[_ngcontent-%COMP%]{padding:16px}mat-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center}mat-card[_ngcontent-%COMP%]{background-color:#e5e5e522}.mdc-evolution-chip-set__chips[_ngcontent-%COMP%]{display:flex;justify-content:center}.green-chip[_ngcontent-%COMP%]{color:#0de50d}.red-chip[_ngcontent-%COMP%]{color:#de1212}"]})};var Bt=[{path:"",component:q},{path:":id",component:z}],$=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=P({type:i});static \u0275inj=F({imports:[W.forChild(Bt),W]})};var gt=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=P({type:i});static \u0275inj=F({imports:[ne,$,ve,ut,We,Ye,dt,we,me,et,Ne,Re,ce,Be,Ge,Ke,ct]})};export{gt as CoursesModule};
